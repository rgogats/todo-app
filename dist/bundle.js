(()=>{"use strict";const e=[],t=()=>e,o=(t,o)=>{console.log("new todolist",t,o);const l=[];let n="active";return e.push({id:t,label:o}),console.log("all todolists",e),console.log("all todolists.length",e.length),{getTodos:()=>l,addTodo:e=>{l.push(e),e.moveTodo(t)},removeTodo:e=>{for(let t=0;t<l.length;t++)return l[t]===e?(l.splice(l[t],1),console.log("updated todos in list",l)):"Todo not found"},getLabel:()=>o,getId:()=>t,editLabel:e=>{o=e},deleteList:()=>{n="deleted"}}};(()=>{const e=document.querySelector("div#content"),l=(document.querySelector("h1"),document.querySelector("button#new-todo")),n=document.querySelector("div#newTodoModal"),d=document.querySelector("form"),c=document.querySelector("input#title.form-control"),s=document.querySelector("textarea#desc.form-control"),a=document.querySelector("select#list.form-control"),i=document.querySelector("button.close"),r=document.querySelector("button#new-todolist"),u=document.createElement("div");u.className="todolist-container";const m=document.createElement("h3");m.className="list-label",u.appendChild(m),e.appendChild(u);const g=o(0,"Default List");m.textContent=g.getLabel(),l.addEventListener("click",(()=>{console.log("click new todo"),n.style.display="block",console.log(a);for(let e=0;e<t().length;e++){const o=document.createElement("option");o.value=t()[e].label,a.appendChild(o),o.textContent=t()[e].label}})),i.addEventListener("click",(()=>{n.style.display="none"})),d.addEventListener("submit",(e=>{let o,l;e.preventDefault();for(let e=0;e<t().length;e++)t()[e].label===a.value?(o=t()[e].id,console.log("match found",t()[e])):console.log("noMatch");o&&(console.log(`matching... ${o}`),l=document.querySelector(`div.todolist-container[data-index="${o}"]`),console.log("matchingListContainer",l));const d=((e,t,o)=>{let l,n,d="active",c=t.length>20?t.slice(0,20)+"[...]":t;return{getTodo:()=>({title:e,desc:t,descPreview:c}),editTodo:(o,l)=>{e=o,t=l},setPriority:e=>{l=e},setDueDate:e=>{n=e},moveTodo:e=>{},deleteTodo:()=>{d="deleted",console.log("status: ",d)}}})(c.value,s.value);console.log("newTodo",d),g.addTodo(d);const i=document.createElement("div");i.className="todo-container",l.appendChild(i);const r=document.createElement("div");r.className="todo-title";const u=document.createElement("div");u.className="todo-desc",r.textContent=`Title: ${d.getTodo().title}`,u.textContent=`Description: ${d.getTodo().descPreview}`;const m=document.createElement("button");m.className="edit",m.textContent="Edit";const p=document.createElement("button");p.className="delete",p.textContent="Delete",c.value="",s.textContent="",i.appendChild(r),i.appendChild(u),i.appendChild(m),i.appendChild(p),i.addEventListener("click",(()=>{console.log("expanded details here")})),m.addEventListener("click",(()=>{console.log("edit form here")})),p.addEventListener("click",(()=>{console.log("delete logic here")})),n.style.display="none"})),r.addEventListener("click",(()=>{const l=document.createElement("div"),n=document.createElement("input"),d=document.createElement("h3");let c;n.addEventListener("keypress",(e=>{"Enter"===e.key&&(c=o(t().length,n.value),console.log("getAllTodoLists.length",t().length),l.removeChild(n),d.className="list-label",d.textContent=c.getLabel(),console.log(c.getLabel()),l.dataset.index=c.getId())})),l.className="todolist-container",l.appendChild(d),l.appendChild(n),e.appendChild(l),console.log("add listContainer",l)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixTQUFTLEtBQ3BDcEMsUUFBUUMsSUFBSSx3QkFFZixJQUVEK0QsRUFBZTVCLGlCQUFpQixTQUFTLEtBQ3JDcEMsUUFBUUMsSUFBSSxpQkFFZixJQUVEZ0UsRUFBaUI3QixpQkFBaUIsU0FBUyxLQUN2Q3BDLFFBQVFDLElBQUksb0JBRWYsSUFFRHFCLEVBQVVlLE1BQU1DLFFBQVUsTUFFN0IsSUFFRFYsRUFBY1EsaUJBQWlCLFNBQVMsS0FDcEMsTUFBTThCLEVBQWdCL0MsU0FBU1csY0FBYyxPQUN2Q3FDLEVBQWlCaEQsU0FBU1csY0FBYyxTQUN4Q0UsRUFBa0JiLFNBQVNXLGNBQWMsTUFDL0MsSUFBSXNDLEVBRUpELEVBQWUvQixpQkFBaUIsWUFBY0ssSUFDaEMsVUFBVkEsRUFBRTRCLE1BQ0VELEVBQVV2RSxFQUFTRCxJQUFrQlMsT0FBUThELEVBQWUzQixPQUM1RHhDLFFBQVFDLElBQUkseUJBQTBCTCxJQUFrQlMsUUFDeEQ2RCxFQUFjSSxZQUFZSCxHQUMxQm5DLEVBQWdCRCxVQUFZLGFBQzVCQyxFQUFnQkcsWUFBY2lDLEVBQVF2RCxXQUN0Q2IsUUFBUUMsSUFBSW1FLEVBQVF2RCxZQUNwQnFELEVBQWNLLFFBQVFDLE1BQVFKLEVBQVF0RCxRQUU3QyxJQUVEb0QsRUFBY25DLFVBQVkscUJBQzFCbUMsRUFBY2pDLFlBQVlELEdBQzFCa0MsRUFBY2pDLFlBQVlrQyxHQUMxQmpELEVBQVllLFlBQVlpQyxHQUN4QmxFLFFBQVFDLElBQUksb0JBQXFCaUUsRUFDcEMsR0FHSixFRXRJRCxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1hcHAvLi9zcmMvdG9kb0xpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1hcHAvLi9zcmMvdWlDb250cm9sbGVyLmpzIiwid2VicGFjazovL3RvZG8tYXBwLy4vc3JjL3RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby1hcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYWxsVG9kb0xpc3RzID0gW107XG5cbmNvbnN0IGdldEFsbFRvZG9MaXN0cyA9ICgpID0+IHtcbiAgICByZXR1cm4gYWxsVG9kb0xpc3RzO1xufVxuXG5jb25zdCBUb2RvTGlzdCA9ICgoaWQsIGxhYmVsKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ25ldyB0b2RvbGlzdCcsIGlkLCBsYWJlbCk7XG4gICAgY29uc3QgdG9kb3MgPSBbXTtcbiAgICBsZXQgc3RhdHVzID0gJ2FjdGl2ZSc7XG5cbiAgICBjb25zdCBnZXRUb2RvcyA9ICgpID0+IHRvZG9zO1xuXG4gICAgY29uc3QgZ2V0TGFiZWwgPSAoKSA9PiBsYWJlbDtcblxuICAgIGNvbnN0IGdldElkID0gKCkgPT4gaWQ7XG5cbiAgICBjb25zdCBlZGl0TGFiZWwgPSAobmV3TGFiZWwpID0+IHtcbiAgICAgICAgbGFiZWwgPSBuZXdMYWJlbDtcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGFkZFRvZG8gPSAodG9kbykgPT4ge1xuICAgICAgICB0b2Rvcy5wdXNoKHRvZG8pO1xuICAgICAgICB0b2RvLm1vdmVUb2RvKGlkKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRvZG8gPSAodG9kbykgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvZG9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9kb3NbaV0gPT09IHRvZG8gPyAodG9kb3Muc3BsaWNlKHRvZG9zW2ldLCAxKSwgY29uc29sZS5sb2coJ3VwZGF0ZWQgdG9kb3MgaW4gbGlzdCcsIHRvZG9zKSkgOiAnVG9kbyBub3QgZm91bmQnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBkZWxldGVMaXN0ID0gKCkgPT4ge1xuICAgICAgICBzdGF0dXMgPSAnZGVsZXRlZCc7XG4gICAgfTtcblxuICAgIGFsbFRvZG9MaXN0cy5wdXNoKHsgaWQsIGxhYmVsIH0pO1xuICAgIGNvbnNvbGUubG9nKCdhbGwgdG9kb2xpc3RzJywgYWxsVG9kb0xpc3RzKTtcbiAgICBjb25zb2xlLmxvZygnYWxsIHRvZG9saXN0cy5sZW5ndGgnLCBhbGxUb2RvTGlzdHMubGVuZ3RoKTtcblxuICAgIHJldHVybiB7IGdldFRvZG9zLCBhZGRUb2RvLCByZW1vdmVUb2RvLCBnZXRMYWJlbCwgZ2V0SWQsIGVkaXRMYWJlbCwgZGVsZXRlTGlzdCB9O1xufSk7XG5cbmV4cG9ydCB7IGdldEFsbFRvZG9MaXN0cywgVG9kb0xpc3QgfTsiLCJpbXBvcnQgeyBnZXRBbGxUb2RvTGlzdHMsIFRvZG9MaXN0IH0gZnJvbSAnLi90b2RvTGlzdC5qcyc7XG5pbXBvcnQgVG9kbyBmcm9tICcuL3RvZG8uanMnO1xuXG5jb25zdCBVSUNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIC8vIGluaXRpYWxpemUgZGVmYXVsdCBsaXN0IGFuZCB0b2RvbGlzdC1jb250YWluZXIgZWxlbWVudFxuICAgIGNvbnN0IGJvZHlDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2I2NvbnRlbnQnKTtcbiAgICBjb25zdCBwYWdlSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaDEnKTsgICAgXG4gICAgY29uc3QgbmV3VG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbiNuZXctdG9kbycpO1xuICAgIGNvbnN0IHRvZG9Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdiNuZXdUb2RvTW9kYWwnKTtcbiAgICBjb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0I3RpdGxlLmZvcm0tY29udHJvbCcpO1xuICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYSNkZXNjLmZvcm0tY29udHJvbCcpO1xuICAgIGNvbnN0IGxpc3RTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCNsaXN0LmZvcm0tY29udHJvbCcpO1xuICAgIGNvbnN0IGNsb3NlRm9ybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5jbG9zZScpO1xuICAgIGNvbnN0IG5ld2xpc3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24jbmV3LXRvZG9saXN0Jyk7XG5cbiAgICAvLyBjcmVhdGUgZW1wdHkgdG9kb2xpc3QtY29udGFpbmVyXG4gICAgY29uc3QgdG9kb0xpc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0b2RvTGlzdENvbnRhaW5lci5jbGFzc05hbWUgPSAndG9kb2xpc3QtY29udGFpbmVyJztcbiAgICBjb25zdCBsaXN0TGFiZWxIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgIGxpc3RMYWJlbEhlYWRlci5jbGFzc05hbWUgPSAnbGlzdC1sYWJlbCc7XG4gICAgdG9kb0xpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQobGlzdExhYmVsSGVhZGVyKTtcbiAgICBib2R5Q29udGVudC5hcHBlbmRDaGlsZCh0b2RvTGlzdENvbnRhaW5lcik7XG5cbiAgICAvLyBjcmVhdGUgZGVmYXVsdCBsaXN0XG4gICAgY29uc3QgZGVmYXVsdExpc3QgPSBUb2RvTGlzdCgwLCAnRGVmYXVsdCBMaXN0Jyk7XG4gICAgbGlzdExhYmVsSGVhZGVyLnRleHRDb250ZW50ID0gZGVmYXVsdExpc3QuZ2V0TGFiZWwoKTtcblxuICAgIG5ld1RvZG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKCk9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBuZXcgdG9kbycpO1xuICAgICAgICB0b2RvTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGNvbnNvbGUubG9nKGxpc3RTZWxlY3Rvcik7XG5cbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGdldEFsbFRvZG9MaXN0cygpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBsaXN0T3B0aW9uLnZhbHVlID0gZ2V0QWxsVG9kb0xpc3RzKClbaV0ubGFiZWw7XG4gICAgICAgICAgICBsaXN0U2VsZWN0b3IuYXBwZW5kQ2hpbGQobGlzdE9wdGlvbik7XG4gICAgICAgICAgICBsaXN0T3B0aW9uLnRleHRDb250ZW50ID0gZ2V0QWxsVG9kb0xpc3RzKClbaV0ubGFiZWw7XG4gICAgICAgIH07XG4gICAgfSkpO1xuXG4gICAgY2xvc2VGb3JtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCgpID0+IHtcbiAgICAgICAgdG9kb01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSkpO1xuXG4gICAgdG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBsZXQgbWF0Y2hJbmRleDtcbiAgICAgICAgbGV0IG1hdGNoaW5nTGlzdENvbnRhaW5lcjtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGdldEFsbFRvZG9MaXN0cygpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBnZXRBbGxUb2RvTGlzdHMoKVtpXS5sYWJlbCA9PT0gbGlzdFNlbGVjdG9yLnZhbHVlID8gKG1hdGNoSW5kZXggPSBnZXRBbGxUb2RvTGlzdHMoKVtpXS5pZCwgY29uc29sZS5sb2coJ21hdGNoIGZvdW5kJywgZ2V0QWxsVG9kb0xpc3RzKClbaV0pKSA6IGNvbnNvbGUubG9nKCdub01hdGNoJyk7XG4gICAgICAgICAgICAvLyBsaXN0U2VsZWN0b3IudmFsdWUgPT09IGxpc3QubGFiZWwgPyBjb25zb2xlLmxvZygnbWF0Y2ggZm91bmQnKSA6IGNvbnNvbGUubG9nKCdub01hdGNoJyk7XG4gICAgICAgICAgICAvLyBzZWxlY3Rvci52YWx1ZSA9PT0gdG9kb0xpc3QudGl0bGUgPyBtYXRjaEluZGV4ID0gdG9kb0xpc3QuaWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYobWF0Y2hJbmRleCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYG1hdGNoaW5nLi4uICR7bWF0Y2hJbmRleH1gKTtcbiAgICAgICAgICAgIG1hdGNoaW5nTGlzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdi50b2RvbGlzdC1jb250YWluZXJbZGF0YS1pbmRleD1cIiR7bWF0Y2hJbmRleH1cIl1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtYXRjaGluZ0xpc3RDb250YWluZXInLCBtYXRjaGluZ0xpc3RDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFwcGVuZCB0b2RvTGlzdFxuXG4gICAgICAgIGNvbnN0IG5ld1RvZG8gPSBUb2RvKHRpdGxlLnZhbHVlLCBkZXNjLnZhbHVlLCBtYXRjaEluZGV4KTtcbiAgICAgICAgY29uc29sZS5sb2coJ25ld1RvZG8nLCBuZXdUb2RvKTtcbiAgICAgICAgZGVmYXVsdExpc3QuYWRkVG9kbyhuZXdUb2RvKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdG9kb0NvbnRhaW5lci5jbGFzc05hbWUgPSAndG9kby1jb250YWluZXInO1xuICAgICAgICBtYXRjaGluZ0xpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodG9kb0NvbnRhaW5lcik7XG5cbiAgICAgICAgY29uc3QgdG9kb0l0ZW1UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0b2RvSXRlbVRpdGxlLmNsYXNzTmFtZSA9ICd0b2RvLXRpdGxlJztcbiAgICAgICAgY29uc3QgdG9kb0l0ZW1EZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRvZG9JdGVtRGVzYy5jbGFzc05hbWUgPSAndG9kby1kZXNjJztcbiAgICAgICAgdG9kb0l0ZW1UaXRsZS50ZXh0Q29udGVudCA9IGBUaXRsZTogJHtuZXdUb2RvLmdldFRvZG8oKS50aXRsZX1gO1xuICAgICAgICB0b2RvSXRlbURlc2MudGV4dENvbnRlbnQgPSBgRGVzY3JpcHRpb246ICR7bmV3VG9kby5nZXRUb2RvKCkuZGVzY1ByZXZpZXd9YDtcbiAgICAgICAgY29uc3QgdG9kb0VkaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgdG9kb0VkaXRCdXR0b24uY2xhc3NOYW1lID0gJ2VkaXQnO1xuICAgICAgICB0b2RvRWRpdEJ1dHRvbi50ZXh0Q29udGVudCA9ICdFZGl0JztcbiAgICAgICAgY29uc3QgdG9kb0RlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICB0b2RvRGVsZXRlQnV0dG9uLmNsYXNzTmFtZSA9ICdkZWxldGUnO1xuICAgICAgICB0b2RvRGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ0RlbGV0ZSc7XG5cbiAgICAgICAgdGl0bGUudmFsdWUgPSAnJztcbiAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICcnO1xuXG4gICAgICAgIHRvZG9Db250YWluZXIuYXBwZW5kQ2hpbGQodG9kb0l0ZW1UaXRsZSk7XG4gICAgICAgIHRvZG9Db250YWluZXIuYXBwZW5kQ2hpbGQodG9kb0l0ZW1EZXNjKTtcbiAgICAgICAgdG9kb0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2RvRWRpdEJ1dHRvbik7XG4gICAgICAgIHRvZG9Db250YWluZXIuYXBwZW5kQ2hpbGQodG9kb0RlbGV0ZUJ1dHRvbik7XG5cbiAgICAgICAgdG9kb0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZXhwYW5kZWQgZGV0YWlscyBoZXJlJyk7XG4gICAgICAgICAgICAvLyBhZGQgbG9naWMgdG8gZXhwYW5kIGRlc2NyaXB0aW9uXG4gICAgICAgIH0pKTtcblxuICAgICAgICB0b2RvRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZWRpdCBmb3JtIGhlcmUnKTtcbiAgICAgICAgICAgIC8vIGFkZCBlZGl0IGZvcm0gbG9naWNcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHRvZG9EZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZSBsb2dpYyBoZXJlJyk7XG4gICAgICAgICAgICAvLyBhZGQgZGVsZXRlIHRvZG8gbG9naWNcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHRvZG9Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgfSkpO1xuXG4gICAgbmV3bGlzdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgbGlzdExhYmVsSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjb25zdCBsaXN0TGFiZWxIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgICAgICBsZXQgbmV3TGlzdDtcblxuICAgICAgICBsaXN0TGFiZWxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsICgoZSkgPT4ge1xuICAgICAgICAgICAgZS5rZXkgPT09IFwiRW50ZXJcIiA/IChcbiAgICAgICAgICAgICAgICBuZXdMaXN0ID0gVG9kb0xpc3QoZ2V0QWxsVG9kb0xpc3RzKCkubGVuZ3RoLCBsaXN0TGFiZWxJbnB1dC52YWx1ZSksXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJnZXRBbGxUb2RvTGlzdHMubGVuZ3RoXCIsIGdldEFsbFRvZG9MaXN0cygpLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgbGlzdENvbnRhaW5lci5yZW1vdmVDaGlsZChsaXN0TGFiZWxJbnB1dCksIFxuICAgICAgICAgICAgICAgIGxpc3RMYWJlbEhlYWRlci5jbGFzc05hbWUgPSAnbGlzdC1sYWJlbCcsXG4gICAgICAgICAgICAgICAgbGlzdExhYmVsSGVhZGVyLnRleHRDb250ZW50ID0gbmV3TGlzdC5nZXRMYWJlbCgpLFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld0xpc3QuZ2V0TGFiZWwoKSksIFxuICAgICAgICAgICAgICAgIGxpc3RDb250YWluZXIuZGF0YXNldC5pbmRleCA9IG5ld0xpc3QuZ2V0SWQoKVxuICAgICAgICAgICAgKSA6IG51bGw7XG4gICAgICAgIH0pKVxuICAgICAgICBcbiAgICAgICAgbGlzdENvbnRhaW5lci5jbGFzc05hbWUgPSAndG9kb2xpc3QtY29udGFpbmVyJztcbiAgICAgICAgbGlzdENvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0TGFiZWxIZWFkZXIpO1xuICAgICAgICBsaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGxpc3RMYWJlbElucHV0KTtcbiAgICAgICAgYm9keUNvbnRlbnQuYXBwZW5kQ2hpbGQobGlzdENvbnRhaW5lcik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdhZGQgbGlzdENvbnRhaW5lcicsIGxpc3RDb250YWluZXIpO1xuICAgIH0pKTtcbiAgICBcblxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVJQ29udHJvbGxlcjsiLCJjb25zdCBUb0RvID0gKCh0aXRsZSwgZGVzYywgbGlzdElkKSA9PiB7XG4gICAgbGV0IHByaW9yaXR5TGV2ZWw7XG4gICAgbGV0IGR1ZURhdGU7XG4gICAgbGV0IHN0YXR1cyA9ICdhY3RpdmUnO1xuICAgIGxldCBkZXNjUHJldmlldyA9IGRlc2MubGVuZ3RoID4gMjAgPyBkZXNjLnNsaWNlKDAsMjApICsgJ1suLi5dJyA6IGRlc2M7XG5cbiAgICBjb25zdCBnZXRUb2RvID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgZGVzYzogZGVzYyxcbiAgICAgICAgICAgIGRlc2NQcmV2aWV3OiBkZXNjUHJldmlldyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBlZGl0VG9kbyA9IChuZXdUaXRsZSwgbmV3RGVzYykgPT4ge1xuICAgICAgICB0aXRsZSA9IG5ld1RpdGxlO1xuICAgICAgICBkZXNjID0gbmV3RGVzYztcbiAgICB9XG5cbiAgICBjb25zdCBzZXRQcmlvcml0eSA9IChsZXZlbCkgPT4ge1xuICAgICAgICBwcmlvcml0eUxldmVsID0gbGV2ZWw7XG4gICAgfVxuXG4gICAgY29uc3Qgc2V0RHVlRGF0ZSA9IChkYXRlKSA9PiB7XG4gICAgICAgIGR1ZURhdGUgPSBkYXRlO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbGV0ZVRvZG8gPSAoKSA9PiB7XG4gICAgICAgIHN0YXR1cyA9ICdkZWxldGVkJztcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXR1czogJywgc3RhdHVzKTtcbiAgICB9XG5cbiAgICBjb25zdCBtb3ZlVG9kbyA9IChuZXdMaXN0SWQpID0+IHtcbiAgICAgICAgbGlzdElkID0gbmV3TGlzdElkO1xuICAgIH1cblxuICAgIHJldHVybiB7IGdldFRvZG8sIGVkaXRUb2RvLCBzZXRQcmlvcml0eSwgc2V0RHVlRGF0ZSwgbW92ZVRvZG8sIGRlbGV0ZVRvZG8gfTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBUb0RvOyIsImltcG9ydCBVSUNvbnRyb2xsZXIgZnJvbSAnLi91aUNvbnRyb2xsZXIuanMnO1xuXG5VSUNvbnRyb2xsZXIoKTsiXSwibmFtZXMiOlsiYWxsVG9kb0xpc3RzIiwiZ2V0QWxsVG9kb0xpc3RzIiwiVG9kb0xpc3QiLCJpZCIsImxhYmVsIiwiY29uc29sZSIsImxvZyIsInRvZG9zIiwic3RhdHVzIiwicHVzaCIsImxlbmd0aCIsImdldFRvZG9zIiwiYWRkVG9kbyIsInRvZG8iLCJtb3ZlVG9kbyIsInJlbW92ZVRvZG8iLCJpIiwic3BsaWNlIiwiZ2V0TGFiZWwiLCJnZXRJZCIsImVkaXRMYWJlbCIsIm5ld0xhYmVsIiwiZGVsZXRlTGlzdCIsImJvZHlDb250ZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmV3VG9kb0J1dHRvbiIsInRvZG9Nb2RhbCIsInRvZG9Gb3JtIiwidGl0bGUiLCJkZXNjIiwibGlzdFNlbGVjdG9yIiwiY2xvc2VGb3JtQnV0dG9uIiwibmV3bGlzdEJ1dHRvbiIsInRvZG9MaXN0Q29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImxpc3RMYWJlbEhlYWRlciIsImFwcGVuZENoaWxkIiwiZGVmYXVsdExpc3QiLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJsaXN0T3B0aW9uIiwidmFsdWUiLCJlIiwibWF0Y2hJbmRleCIsIm1hdGNoaW5nTGlzdENvbnRhaW5lciIsInByZXZlbnREZWZhdWx0IiwibmV3VG9kbyIsImxpc3RJZCIsInByaW9yaXR5TGV2ZWwiLCJkdWVEYXRlIiwiZGVzY1ByZXZpZXciLCJzbGljZSIsImdldFRvZG8iLCJlZGl0VG9kbyIsIm5ld1RpdGxlIiwibmV3RGVzYyIsInNldFByaW9yaXR5IiwibGV2ZWwiLCJzZXREdWVEYXRlIiwiZGF0ZSIsIm5ld0xpc3RJZCIsImRlbGV0ZVRvZG8iLCJ0b2RvQ29udGFpbmVyIiwidG9kb0l0ZW1UaXRsZSIsInRvZG9JdGVtRGVzYyIsInRvZG9FZGl0QnV0dG9uIiwidG9kb0RlbGV0ZUJ1dHRvbiIsImxpc3RDb250YWluZXIiLCJsaXN0TGFiZWxJbnB1dCIsIm5ld0xpc3QiLCJrZXkiLCJyZW1vdmVDaGlsZCIsImRhdGFzZXQiLCJpbmRleCJdLCJzb3VyY2VSb290IjoiIn0=